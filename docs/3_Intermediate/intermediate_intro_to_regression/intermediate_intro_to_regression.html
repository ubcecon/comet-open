<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="COMET Team   Emrul Hasan, Jonah Heyl, Shiming Wu, William Co, Avi Woodward-Kelen, Anneke Dresselhuis, Rathin Dharani, Devan Rawlings, Jasmine Arora, Jonathan Graves">
<meta name="dcterms.date" content="2024-07-25">
<meta name="description" content="An introduction to simple regression using Jupyter and R, with an emphasis on understanding what regression models are actually doing. Computation is using OLS.">

<title>COMET - 2.1 - Intermediate - Introduction to Regression</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../docs/2_Beginner/beginner_sampling_distributions/beginner_sampling_distributions.html" rel="prev">
<link href="../../../media/comet_favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="keywords" content="economics, econometrics, R, data, machine learning, UBC, COMET, geog 374, econ 325, econ 326, learning, teaching, learn r, r help, help, tutorial, r tutorial for beginners,learning statistics with r, learn r programming, learn statistics, linear regression, r machine learning, learn machine learning, university of british columbia, british columbia, r programming for beginners, r language tutorial, r tutorial for beginners, economic data, econometrics tutoring, economics help for students, economics homework help, oer resources for teachers, open educational resources for teachers, educational resource, oer project, oer materials, oer resources, learn economics online, learn econometrics, teach yourself economics, teach yourself econometrics, econometrics basics for beginners">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../media/logo_no_tiny_text.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">COMET</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-get-started" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Get Started</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-get-started">    
        <li>
    <a class="dropdown-item" href="../../../pages/quickstart.html" rel="" target="">
 <span class="dropdown-text">Quickstart Guide</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/installation/installing_locally.html" rel="" target="">
 <span class="dropdown-text">Install and Use COMET</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_getting_started.html" rel="" target="">
 <span class="dropdown-text">Get Started</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-learn-by-skill-level" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Learn By Skill Level</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-learn-by-skill-level">    
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_getting_started.html" rel="" target="">
 <span class="dropdown-text">Getting Started</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_beginner.html" rel="" target="">
 <span class="dropdown-text">Beginner</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_intermediate.html" rel="" target="">
 <span class="dropdown-text">Intermediate - Econometrics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_geog.html" rel="" target="">
 <span class="dropdown-text">Intermediate - Geospatial</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_advanced.html" rel="" target="">
 <span class="dropdown-text">Advanced</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../../pages/index/all.html" rel="" target="">
 <span class="dropdown-text">Browse All</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-learn-by-class" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Learn By Class</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-learn-by-class">    
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_226.html" rel="" target="">
 <span class="dropdown-text">Making Sense of Economic Data (ECON 226/227)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_325.html" rel="" target="">
 <span class="dropdown-text">Econometrics I (ECON 325)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_326.html" rel="" target="">
 <span class="dropdown-text">Econometrics II (ECON 326)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_geog.html" rel="" target="">
 <span class="dropdown-text">Statistics in Geography (GEOG 374)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-learn-to-research" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Learn to Research</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-learn-to-research">    
        <li>
    <a class="dropdown-item" href="../../../pages/index/index_research.html" rel="" target="">
 <span class="dropdown-text">Learn How to Do a Project</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teach-with-comet" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Teach With COMET</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-teach-with-comet">    
        <li>
    <a class="dropdown-item" href="../../../pages/teaching_with_comet.html" rel="" target="">
 <span class="dropdown-text">Learn how to teach with Jupyter and COMET</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/using_comet.html" rel="" target="">
 <span class="dropdown-text">Using COMET in the Classroom</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/dissemination/dissemination.html" rel="" target="">
 <span class="dropdown-text">See COMET presentations</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-contribute" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Contribute</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-contribute">    
        <li>
    <a class="dropdown-item" href="../../../pages/installation/installing_for_development.html" rel="" target="">
 <span class="dropdown-text">Install for Development</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/documentation/writing_self_tests.html" rel="" target="">
 <span class="dropdown-text">Write Self Tests</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-launch-comet" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
      <i class="bi bi-play" role="img">
</i> 
 <span class="menu-text">Launch COMET</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-launch-comet">    
        <li>
    <a class="dropdown-item" href="https://open.jupyter.ubc.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fubcecon%2Fcomet-notebooks&amp;urlpath=lab%2Ftree%2Fcomet-notebooks%2F&amp;branch=main" rel="" target=""><i class="bi bi-cloud-check" role="img">
</i> 
 <span class="dropdown-text">Launch on JupyterOpen (with Data)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://open.jupyter.ubc.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fubcecon%2Fcomet-project&amp;urlpath=lab%2Ftree%2Fcomet-project%2F&amp;branch=main" rel="" target=""><i class="bi bi-cloud-check" role="img">
</i> 
 <span class="dropdown-text">Launch on JupyterOpen (lite)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://ubc.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Fubcecon%2Fcomet-project&amp;urlpath=lab%2Ftree%2Fcomet-project%2F&amp;branch=main" rel="" target=""><i class="bi bi-gear" role="img">
</i> 
 <span class="dropdown-text">Launch on Syzygy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://colab.research.google.com/github/ubcecon/comet-notebooks/blob/main/" rel="" target=""><i class="bi bi-google" role="img">
</i> 
 <span class="dropdown-text">Launch on Colab</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/ubcecon/comet-notebooks/archive/refs/heads/main.zip" rel="" target=""><i class="bi bi-cloud-download" role="img">
</i> 
 <span class="dropdown-text">Launch Locally</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="https://github.com/ubcecon/comet-open/archive/refs/heads/datasets.zip" rel="" target=""><i class="bi bi-clipboard-data" role="img">
</i> 
 <span class="dropdown-text">Project Datasets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/ubcecon/comet-open" rel="" target="">
 <span class="dropdown-text">Github Repository</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../#" rel="" target="">
 <span class="menu-text">|</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../../pages/team.html" rel="" target="">
 <span class="dropdown-text">COMET Team</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/copyright.html" rel="" target="">
 <span class="dropdown-text">Copyright Information</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../pages/index/index_beginner.html">Beginner: Using R and Data in Applied Econometrics</a></li><li class="breadcrumb-item"><a href="../../../docs/3_Intermediate/intermediate_intro_to_regression/intermediate_intro_to_regression.html">Simple Regression</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
 <span class="menu-text"><h4>Learn by Skill Level</h4></span>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../pages/index/index_getting_started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started: Introduction to Data, R, and Econometrics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/1_Getting_Started/getting_started_intro_to_jupyter/getting_started_intro_to_jupyter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to JupyterNotebooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/1_Getting_Started/getting_started_intro_to_r/getting_started_intro_to_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/1_Getting_Started/getting_started_intro_to_data/getting_started_intro_to_data1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Data (Part 1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/1_Getting_Started/getting_started_intro_to_data/getting_started_intro_to_data2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Data (Part 2)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../pages/index/index_beginner.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Beginner: Using R and Data in Applied Econometrics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_intro_to_statistics1/beginner_intro_to_statistics1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Statistics I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_intro_to_statistics2/beginner_intro_to_statistics2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Statistics II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_central_tendency/beginner_central_tendency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Central Tendency</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_dispersion_and_dependence/beginner_dispersion_and_dependence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dispersion and Dependence</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_confidence_intervals/beginner_confidence_intervals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Confidence Intervals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_hypothesis_testing/beginner_hypothesis_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hypothesis Testing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_intro_to_data_visualization1/beginner_intro_to_data_visualization1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_intro_to_data_visualization2/beginner_intro_to_data_visualization2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_distributions/beginner_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/2_Beginner/beginner_sampling_distributions/beginner_sampling_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampling Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/intermediate_intro_to_regression/intermediate_intro_to_regression.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Simple Regression</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../pages/index/index_intermediate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intermediate: Econometrics and Modeling Using R</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/intermediate_intro_to_regression/intermediate_intro_to_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simple Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/intermediate_multiple_regression/intermediate_multiple_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/intermediate_issues_in_regression/intermediate_issues_in_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Issues in Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/intermediate_interactions_and_nonlinear_terms/intermediate_interactions_and_nonlinear_terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interactions</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/index/index_geog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Geographic Computation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/geog_374/Lab_05_Chisquare/Lab_05_Chisquare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chi-Square Test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/geog_374/Lab_06_Ttest/Lab_06_Ttest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">t-test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/geog_374/Lab_02_ANOVA/Lab_02_ANOVA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ANOVA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/geog_374/Lab_03_Regression/Lab_03_Regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/3_Intermediate/geog_374/Climate_Disasters/Climate_Disasters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wrangling and Visualizing Data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../pages/index/index_advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced Modules</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_classification_and_clustering/advanced_classification_and_clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification and Clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_difference_in_differences/advanced_difference_in_differences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Differences In Differences</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_geospatial/advanced_geospatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Geospatial I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_geospatial/advanced_geospatial_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Geospatial II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_instrumental_variables/advanced_instrumental_variables1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instrumental Variables I</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_instrumental_variables/advanced_instrumental_variables2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instrumental Variables II</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_llm_apis2/advanced_llm_apis2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Large Language Model APIs (Python)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_linear_differencing/advanced_linear_differencing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Differencing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_ollama_llm/fine_tuning_llm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Training LLMS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_sentiment_analysis/sentiment_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentiment Analysis Using LLMs (Python)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_transcription/advanced_transcription_whisper.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transcription (Python)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_vocalization/advanced_vocalization_draft.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vocalization (Python)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_word_embeddings/advanced_word_embeddings_python_version.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Word Embeddings (Python)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_word_embeddings/advanced_word_embeddings_r_version.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Word Embeddings (R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_panel_data/advanced_panel_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Panel Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../docs/4_Advanced/advanced_synthetic_control/advanced_synthetic_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Synthetic Controls</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#outline" id="toc-outline" class="nav-link active" data-scroll-target="#outline">Outline</a>
  <ul class="collapse">
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#outcomes" id="toc-outcomes" class="nav-link" data-scroll-target="#outcomes">Outcomes</a></li>
  </ul></li>
  <li><a href="#part-1-learning-about-regressions" id="toc-part-1-learning-about-regressions" class="nav-link" data-scroll-target="#part-1-learning-about-regressions">Part 1: Learning About Regressions</a>
  <ul class="collapse">
  <li><a href="#regression-models" id="toc-regression-models" class="nav-link" data-scroll-target="#regression-models">Regression Models</a></li>
  <li><a href="#example-manual-estimation" id="toc-example-manual-estimation" class="nav-link" data-scroll-target="#example-manual-estimation">Example: Manual Estimation</a></li>
  <li><a href="#interactive-visualization-of-ols" id="toc-interactive-visualization-of-ols" class="nav-link" data-scroll-target="#interactive-visualization-of-ols">Interactive Visualization of OLS</a></li>
  <li><a href="#simple-regressions-in-r" id="toc-simple-regressions-in-r" class="nav-link" data-scroll-target="#simple-regressions-in-r">Simple Regressions in R</a></li>
  </ul></li>
  <li><a href="#part-2-simple-regressions-and-t-tests" id="toc-part-2-simple-regressions-and-t-tests" class="nav-link" data-scroll-target="#part-2-simple-regressions-and-t-tests">Part 2: Simple Regressions and <span class="math inline">\(t\)</span>-Tests</a>
  <ul class="collapse">
  <li><a href="#multiple-levels" id="toc-multiple-levels" class="nav-link" data-scroll-target="#multiple-levels">Multiple Levels</a></li>
  </ul></li>
  <li><a href="#part-3-weighting" id="toc-part-3-weighting" class="nav-link" data-scroll-target="#part-3-weighting">Part 3: Weighting</a></li>
  <li><a href="#part-4-exercises" id="toc-part-4-exercises" class="nav-link" data-scroll-target="#part-4-exercises">Part 4: Exercises</a>
  <ul class="collapse">
  <li><a href="#activity-1" id="toc-activity-1" class="nav-link" data-scroll-target="#activity-1">Activity 1</a></li>
  <li><a href="#activity-2" id="toc-activity-2" class="nav-link" data-scroll-target="#activity-2">Activity 2</a></li>
  <li><a href="#activity-3" id="toc-activity-3" class="nav-link" data-scroll-target="#activity-3">Activity 3</a></li>
  <li><a href="#theoretical-activity-1" id="toc-theoretical-activity-1" class="nav-link" data-scroll-target="#theoretical-activity-1">Theoretical Activity 1</a></li>
  <li><a href="#optional-bonus-activity-4" id="toc-optional-bonus-activity-4" class="nav-link" data-scroll-target="#optional-bonus-activity-4">Optional: Bonus Activity 4</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/ubcecon/comet-open/issues/new" class="toc-action">Report an issue</a></p></div></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="intermediate_intro_to_regression.ipynb" download="intermediate_intro_to_regression.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2.1 - Intermediate - Introduction to Regression</h1>
  <div class="quarto-categories">
    <div class="quarto-category">introduction</div>
    <div class="quarto-category">econ 325</div>
    <div class="quarto-category">econ 326</div>
    <div class="quarto-category">simple regression</div>
    <div class="quarto-category">regression</div>
    <div class="quarto-category">ols</div>
    <div class="quarto-category">t-test</div>
    <div class="quarto-category">dummy variable</div>
    <div class="quarto-category">pareto distribution</div>
    <div class="quarto-category">beginner</div>
    <div class="quarto-category">intermediate</div>
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    An introduction to simple regression using Jupyter and R, with an emphasis on understanding what regression models are actually doing. Computation is using OLS.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>COMET Team <br> <em>Emrul Hasan, Jonah Heyl, Shiming Wu, William Co, Avi Woodward-Kelen, Anneke Dresselhuis, Rathin Dharani, Devan Rawlings, Jasmine Arora, Jonathan Graves</em> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">25 July 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="outline" class="level2">
<h2 class="anchored" data-anchor-id="outline">Outline</h2>
<section id="prerequisites" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites">Prerequisites</h3>
<ul>
<li>Basic R and Jupyter skills</li>
<li>A theoretical understanding of simple linear relationship</li>
<li>An understanding of hypothesis testing</li>
<li>Types of variables (qualitative, quantitative)</li>
</ul>
</section>
<section id="outcomes" class="level3">
<h3 class="anchored" data-anchor-id="outcomes">Outcomes</h3>
<p>By the end of this notebook, you will be able to:</p>
<ul>
<li>Learn how to run a simple linear regression using R</li>
<li>Create and understand regression outputs in R</li>
<li>Understand how to interpret coefficient estimates from simple linear regressions in terms of an econometric model</li>
<li>Examine the various elements of regression objects in R (including fitted values, residuals and coefficients)</li>
<li>Understand the relationship between <span class="math inline">\(t\)</span>-tests and the estimates from simple linear regressions</li>
<li>Understand the role of qualitative variables in regression analysis, with a particular emphasis on dummies</li>
<li>Explain how adding variables to a model changes the results</li>
</ul>
<blockquote class="blockquote">
<p>Note that the data in this exercise is provided under the Statistics Canada Open License: &gt; <span id="fn1"><a href="#fn1s"><sup>1</sup></a>Statistics Canada, Survey of Financial Security, 2019, 2021. Reproduced and distributed on an “as is” basis with the permission of Statistics Canada. Adapted from Statistics Canada, Survey of Financial Security, 2019-2021. This does not constitute an endorsement by Statistics Canada of this product.</span></p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"intermediate_intro_to_regression_tests.r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"../datasets_intermediate/SFS_2019_Eng.dta"</span>)  <span class="co">#basic data cleaning, covered in previous modules</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(SFS_data, <span class="sc">!</span><span class="fu">is.na</span>(SFS_data<span class="sc">$</span>pefmtinc))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(SFS_data, <span class="at">income_before_tax =</span> pefmtinc)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(SFS_data, <span class="at">income_after_tax =</span> pefatinc)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(SFS_data, <span class="at">wealth =</span> pwnetwpg)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(SFS_data, <span class="at">gender =</span> pgdrmie)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> <span class="fu">rename</span>(SFS_data, <span class="at">education =</span> peducmie)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> SFS_data[<span class="sc">!</span>(SFS_data<span class="sc">$</span>education<span class="sc">==</span><span class="st">"9"</span>),]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(SFS_data<span class="sc">$</span>education)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> SFS_data[<span class="fu">order</span>(SFS_data<span class="sc">$</span>education),]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education <span class="ot">&lt;-</span> <span class="fu">as.character</span>(SFS_data<span class="sc">$</span>education)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education[SFS_data<span class="sc">$</span>education <span class="sc">==</span> <span class="st">"1"</span>] <span class="ot">&lt;-</span> <span class="st">"Less than high school"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education[SFS_data<span class="sc">$</span>education <span class="sc">==</span> <span class="st">"2"</span>] <span class="ot">&lt;-</span> <span class="st">"High school"</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education[SFS_data<span class="sc">$</span>education <span class="sc">==</span> <span class="st">"3"</span>] <span class="ot">&lt;-</span> <span class="st">"Non-university post-secondary"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education[SFS_data<span class="sc">$</span>education <span class="sc">==</span> <span class="st">"4"</span>] <span class="ot">&lt;-</span> <span class="st">"University"</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(SFS_data<span class="sc">$</span>gender)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>SFS_data<span class="sc">$</span>education <span class="ot">&lt;-</span> <span class="fu">as_factor</span>(SFS_data<span class="sc">$</span>education)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="part-1-learning-about-regressions" class="level2">
<h2 class="anchored" data-anchor-id="part-1-learning-about-regressions">Part 1: Learning About Regressions</h2>
<p>What is a regression? What is the relationship of a regression to other statistical concepts? How do we use regressions to answer economic questions?</p>
<p>In this notebook, we will explore these questions using data from the 2019 Survey of Financial Security (SFS). If you did module <em>1.0.1 Beginner Introduction to Statistics using R</em> you might recall we used it to learn more about the gender wealth gap between male and female lead households. You don’t need to work through the module in order to follow along, but if you didn’t do it and you feel you might benefit from a statistical refresher - now would be a great time for a little refresher.</p>
<p>Either way, we’ll begin our analysis by exploring the relationship between wealth and income. Let’s start off with a visualization:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repr.plot.width=</span><span class="dv">8</span>,<span class="at">repr.plot.height=</span><span class="dv">8</span>) <span class="co">#controls the image size</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SFS_data, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">2.4</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">3.4</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">7</span>), <span class="fu">aes</span>(<span class="at">x =</span> income_after_tax, <span class="at">y =</span> wealth)) <span class="sc">+</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">xlab</span>(<span class="st">"Income After Tax"</span>) <span class="sc">+</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylab</span>(<span class="st">"Wealth"</span>) <span class="sc">+</span> <span class="fu">scale_x_continuous</span>()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>f <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><em>Think Deeper</em>: What do you see here? Is there anything about this relationship that sticks out to you? Why does it have the shape it does?</p>
</blockquote>
<p>You can probably tell that there is definitely some relationship between wealth and after-tax income - but it can be difficult to visualize using a scatterplot alone. There are far too many points to make out a discernable pattern or relationship here.</p>
<section id="regression-models" class="level3">
<h3 class="anchored" data-anchor-id="regression-models">Regression Models</h3>
<p>This is where a <strong>regression model</strong> comes in. A regression model specifies the relationship between two variables. For example, a linear relationship would be:</p>
<p><span class="math display">\[ W_i = \beta_0 + \beta_1I_i
\]</span></p>
<p>Where <span class="math inline">\(W_i\)</span> is wealth of family <span class="math inline">\(i\)</span>, and <span class="math inline">\(I_i\)</span> is their after-tax income. In econometrics, we typically refer to <span class="math inline">\(W_i\)</span> as the <strong>outcome</strong> variable, and <span class="math inline">\(I_i\)</span> as the <strong>explanatory</strong> variable; you may have also heard the terms <em>dependent</em> and <em>independent</em> variables respectively, but these aren’t actually very good descriptions of what these variables are in econometrics which is why we won’t use them here.</p>
<p>A model like this is our description of what this relationship is - but it depends on two unknowns: <span class="math inline">\(\beta_0\)</span>, <span class="math inline">\(\beta_1\)</span>.</p>
<ul>
<li><span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> are <strong>parameters</strong> of the model: they are numbers that determine the relationship (intercept and slope, respectively) between <span class="math inline">\(W_i\)</span> and <span class="math inline">\(I_i\)</span></li>
<li>This is a <em>linear</em> relationship because the model we have specified uses coefficients that are characteristic of linear model formulas - note that there are many other kinds of models beyond the linear type seen here.</li>
</ul>
<p>It is unlikely, if not impossible, for the relationship we observe here to completely explain everything about our data. We also need to include a term which captures everything that is <em>not</em> described by the relationship we described in the model. This is called the <em>residual</em> term (meaning “leftover”).</p>
<ul>
<li>The <span class="math inline">\(\epsilon_i\)</span> is the <strong>residual</strong>: it is a component that corresponds to the part of the data which is <em>not</em> described by the model</li>
<li>Residual terms will usually have certain assumed properties that allow us to estimate the model</li>
</ul>
<p>Conceptually, you can think about a regression as two parts: the part of the relationship explained by your model (<span class="math inline">\(W_i = \beta_0 + \beta_1 I_i\)</span>) and the part which is not explained (<span class="math inline">\(\epsilon_i\)</span>). The process of “fitting” or estimating a regression model refers to finding values for <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> such that as little as possible of the model is explained by the residual term. We write the complete regression equation by combining the two parts of the model:</p>
<p><span class="math display">\[
W_i = \beta_0 + \beta_1 I_i + \epsilon_i
\]</span></p>
<p>The goal of regression analysis is to:</p>
<ol type="1">
<li>Estimate this equation (and especially the model parameters) as accurately as possible.</li>
<li>Learn about the relationship between <span class="math inline">\(W_i\)</span> and <span class="math inline">\(I_i\)</span> from the results of that estimation</li>
</ol>
<p>There are many ways to define “as accurately as possible” and similarly there are many ways to “estimate” the equation. In this course, we often use <em>ordinary least squares</em> (OLS) as our estimation method which can be understood as the following:</p>
<p><span class="math display">\[
(\hat{\beta_0},\hat{\beta_1}) = \arg \min_{\beta_0,\beta_1} \sum_{i=1}^{n} (W_i - \beta_0 - \beta_1 I_i)^2 =\arg \min_{b_0,b_1} \sum_{i=1}^{n} (\epsilon_i)^2
\]</span></p>
<p>It is just the calculus way of writing “choose <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> (call them <span class="math inline">\(\hat{\beta_0}, \hat{\beta_1}\)</span>) such that they minimize the sum of the squared residuals”. Ultimately, the goal of doing a regression is to explain as much as possible using the parameters (<span class="math inline">\(\beta_0, \beta_1\)</span>) and as little as possible using <span class="math inline">\(\epsilon_i\)</span>. Through this equation, we have transformed our statistical problem into a calculus problem, one that can be solved, for example, by taking derivatives.</p>
<p>There are many, many ways to solve this estimation problem - most of which are built into R. Before getting into how we can estimate using R commands, we’ll discuss on how we can estimate manually.</p>
</section>
<section id="example-manual-estimation" class="level3">
<h3 class="anchored" data-anchor-id="example-manual-estimation">Example: Manual Estimation</h3>
<p>If we think about the residuals as a gauge of error in our model (remember we want to think about the error in absolute terms), we can look at the scatterplot and guess how the model might perform based on how small or large the residuals are from the regression line. As you can probably imagine, this is not the most efficient nor the most accurate way to solve our estimate problem!</p>
<p>Try to get the best fit you can by playing around with the following example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#set the value of B_0 and B_1 with these values</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>B_0 <span class="ot">&lt;-</span> <span class="dv">10000</span>  <span class="co">#change me</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>B_1 <span class="ot">&lt;-</span> <span class="dv">2</span>  <span class="co">#change me</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># don't touch the rest of this code - but see if you can understand it!</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>SSE <span class="ot">&lt;-</span> <span class="fu">sum</span>((SFS_data<span class="sc">$</span>wealth <span class="sc">-</span> B_0 <span class="sc">-</span> B_1<span class="sc">*</span>SFS_data<span class="sc">$</span>income_after_tax)<span class="sc">^</span><span class="dv">2</span>) <span class="co">#sum of our squared errors</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>SSE_rounded <span class="ot">&lt;-</span> <span class="fu">round</span>(SSE<span class="sc">/</span><span class="dv">1000000</span>,<span class="dv">0</span>) </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Your SSE is now,"</span>, SSE_rounded,<span class="st">", How low can you go?"</span>)) <span class="co">#prints our SSE value</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repr.plot.width=</span><span class="dv">10</span>,<span class="at">repr.plot.height=</span><span class="dv">8</span>) <span class="co">#controls the image size</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>fitted_line <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">income_before_tax =</span> SFS_data<span class="sc">$</span>income_before_tax, <span class="at">wealth =</span> B_0 <span class="sc">+</span> B_1<span class="sc">*</span>SFS_data<span class="sc">$</span>income_before_tax) <span class="co">#makes the regression line</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SFS_data,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> income_before_tax, <span class="at">y =</span> wealth),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3000000</span>),</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">30000000</span>)) <span class="sc">+</span> </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"before tax income"</span>) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"wealth"</span>) <span class="sc">+</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> f <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#330974"</span>, <span class="at">data =</span> fitted_line) <span class="co">#style preferences</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>f <span class="co">#prints our graph with the line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As we change our <span class="math inline">\(\beta_0, \beta_1\)</span>, notice how the best fit line changes as well. The closer we fit our line to the data the lower SSE we have.</p>
</section>
<section id="interactive-visualization-of-ols" class="level3">
<h3 class="anchored" data-anchor-id="interactive-visualization-of-ols">Interactive Visualization of OLS</h3>
<p>Understanding OLS is fundamental to understanding regressions and other topics in econometrics. Let’s try and understand the formula for OLS above through a more visual approach.</p>
<p>To demonstrate this, we will use a small scatter plot with just 4 points.</p>
<ul>
<li>The straight line through the scatter plot is modelled by the simple regression formula <span class="math inline">\(B_0 + B_1X\)</span>.</li>
<li>Since it’s nearly impossible for a regression to perfectly predict the relationship between two variables, we will almost always include an <strong>unobservable error</strong> <span class="math inline">\(e_i\)</span> with our regression estimation. This is the vertical distance between the regression line and the actual data points.</li>
<li>Hence each of the points can be modelled by the equation <span class="math inline">\(Y_i = B_0 + B_1X + e_i\)</span>.</li>
<li>Instead of minimizing the error terms, we will try to minimize the squared errors which are represented by the size of those red boxes.</li>
</ul>
<p>Try your own values for <code>beta_0</code> and <code>beta_1</code>. Make sure to try the values only roughly within the specified range. The actual value of <code>beta_0</code> and <code>beta_1</code> that minimize the residual sum of squares is 0.65 and 0.82 respectively. The code block below also displays the area of the red boxes; deviation from these optimal values will increase the area of the red boxes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>beta_0 <span class="ot">&lt;-</span> <span class="fl">0.65</span> <span class="co">#CHANGE THIS VALUE, TRY VALUES BETWEEN 0 - 1</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>beta_1 <span class="ot">&lt;-</span> <span class="fl">0.82</span> <span class="co">#CHANGE THIS VALUE, TRY VALUES BETWEEN 0.6 - 1.4</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.5</span>, <span class="dv">4</span>, <span class="fl">3.6</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># don't worry about this code, just run it!</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>dta <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, y)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>example_df_graph <span class="ot">&lt;-</span> dta <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">geom_abline</span>(<span class="at">intercept =</span> beta_0, <span class="at">slope =</span> beta_1) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> (dta[<span class="dv">1</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">1</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">1</span>, <span class="st">"y"</span>]), <span class="at">xmax =</span> dta[<span class="dv">1</span>, <span class="st">"x"</span>], </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">ymin =</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">1</span>, <span class="st">"x"</span>])), <span class="at">ymax =</span> dta[<span class="dv">1</span>, <span class="st">"y"</span>]),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> <span class="fl">0.1</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>], <span class="at">xmax =</span> (dta[<span class="dv">2</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">2</span>, <span class="st">"y"</span>]), </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">ymin =</span> dta[<span class="dv">2</span>, <span class="st">"y"</span>], <span class="at">ymax =</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>]))), </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> <span class="fl">0.1</span>, </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> (dta[<span class="dv">3</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">3</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">3</span>, <span class="st">"y"</span>]), <span class="at">xmax =</span> dta[<span class="dv">3</span>, <span class="st">"x"</span>], </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">ymin =</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">3</span>, <span class="st">"x"</span>])), <span class="at">ymax =</span> dta[<span class="dv">3</span>, <span class="st">"y"</span>]), </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> <span class="fl">0.1</span>, </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> dta[<span class="dv">4</span>, <span class="st">"x"</span>], <span class="at">xmax =</span> (dta[<span class="dv">4</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">4</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">4</span>, <span class="st">"y"</span>]), </span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">ymin =</span> dta[<span class="dv">4</span>, <span class="st">"y"</span>], <span class="at">ymax =</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">4</span>, <span class="st">"x"</span>]))), </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alpha =</span> <span class="fl">0.1</span>, </span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="st">"red"</span>)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>example_df_graph</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>area_1 <span class="ot">&lt;-</span> ((dta[<span class="dv">1</span>, <span class="st">"x"</span>] <span class="sc">-</span> (dta[<span class="dv">1</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">1</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">1</span>, <span class="st">"y"</span>])) <span class="sc">*</span> </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>        ((beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">2</span>, <span class="st">"y"</span>]))</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>area_2 <span class="ot">&lt;-</span> ((dta[<span class="dv">2</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">2</span>, <span class="st">"y"</span>]) <span class="sc">-</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>]) <span class="sc">*</span> </span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>          ((beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">2</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">2</span>, <span class="st">"y"</span>])</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>area_3 <span class="ot">&lt;-</span> (dta[<span class="dv">3</span>, <span class="st">"x"</span>] <span class="sc">-</span> (dta[<span class="dv">3</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">3</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">3</span>, <span class="st">"y"</span>])) <span class="sc">*</span> </span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>          (dta[<span class="dv">3</span>, <span class="st">"y"</span>]) <span class="sc">-</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">3</span>, <span class="st">"x"</span>]))</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>area_4 <span class="ot">&lt;-</span> ((dta[<span class="dv">4</span>, <span class="st">"x"</span>] <span class="sc">+</span> (beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">4</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">4</span>, <span class="st">"y"</span>]) <span class="sc">-</span> dta[<span class="dv">4</span>, <span class="st">"x"</span>]) <span class="sc">*</span> </span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>          ((beta_0 <span class="sc">+</span> (beta_1 <span class="sc">*</span> dta[<span class="dv">4</span>, <span class="st">"x"</span>])) <span class="sc">-</span> dta[<span class="dv">4</span>, <span class="st">"y"</span>])</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>area <span class="ot">&lt;-</span> area_1 <span class="sc">+</span> area_2 <span class="sc">+</span> area_3 <span class="sc">+</span> area_4</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Area of red boxes is: "</span>)</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>area</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="simple-regressions-in-r" class="level3">
<h3 class="anchored" data-anchor-id="simple-regressions-in-r">Simple Regressions in R</h3>
<p>Now, let’s see how we could use a regression in R to do this.</p>
<ul>
<li>Regression models look like: <code>Y ~ X</code> where <code>Y</code> is regressed on <code>X</code> and the <code>~</code> symbol is called “tilde” and is pronounced “TIL-duh” by the way</li>
</ul>
<blockquote class="blockquote">
<p>For now you can ignore the residual terms and parameters when writing the model in R (the computer implicitly knows it’s there!) and just focus on the variables.</p>
</blockquote>
<p>So, for example, our regression model is</p>
<p><span class="math display">\[
W_i = \beta_0 + \beta_1 I_i + \epsilon_i
\]</span></p>
<p>Which can be written in R as</p>
<p><code>wealth ~ income_before_tax</code></p>
<p>Regressions are estimated in R using the <code>lm</code> function which contains an argument to specify the dataset.</p>
<ul>
<li>This creates a <em>linear model</em> object, which can be used to calculate things (using prediction) or perform tests.</li>
<li>It also stores all of the information about the model, such as the coefficient and fit.</li>
<li>These models can also be printed and summarized to give important basic information about a regression.</li>
</ul>
<p>Below are a few of the most important elements of a linear model. Let’s say, for example, that we called the model <code>my_model.</code></p>
<ul>
<li><code>my_model$coefficients</code>: gives us the parameter coefficients</li>
<li><code>my_model$residuals</code>: gives us the residuals</li>
<li><code>my_model$fitted.values</code>: gives us the predicted values</li>
</ul>
<p>Enough talk! Let’s see our model in action here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>regression1 <span class="ot">=</span> <span class="fu">lm</span>(wealth <span class="sc">~</span> income_after_tax, <span class="at">data =</span> SFS_data) <span class="co"># take note this is very important!</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression1)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(regression1<span class="sc">$</span>coefficients)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Take a close look at the results. Identify the following elements:</p>
<ul>
<li>The values of the parameters</li>
<li>The standard errors of the parameters</li>
<li>The %-of the data explained by the model</li>
</ul>
<blockquote class="blockquote">
<p><strong>Test Your Knowledge</strong>: What %-of the variance in wealth is explained by the model?&nbsp;Write the percentage in <em>decimal form</em> and include all decimals given by the model (example, x.xxx - where x are numbers)</p>
</blockquote>
<div class="cell question">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>answer1 <span class="ot">&lt;-</span> ???   <span class="co">#answer goes here</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">test_1</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The underlying model and the parameters tell us about the relationship between the different values:</p>
<p><span class="math display">\[W_i = 169826.16 + 9.96 I_i + \epsilon_i
\]</span></p>
<p>Notice, for example:</p>
<p><span class="math display">\[\frac{\partial W_i}{\partial I_i} = \beta_1 = 9.96
\]</span></p>
<p>In other words, when incomes go up by 1 dollar, we would expect that the wealth accumulated for this given family will rise by 9.96 dollars. This kind of analysis is key to interpreting what this model is telling us.</p>
<p>Finally, let’s visualize our fitted model on the scatterplot from before. How does it compare to your original model?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">repr.plot.width=</span><span class="dv">10</span>,<span class="at">repr.plot.height=</span><span class="dv">8</span>) <span class="co">#style preferences</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>fitted_line2 <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">income_before_tax =</span> SFS_data<span class="sc">$</span>income_before_tax, <span class="at">wealth =</span> regression1<span class="sc">$</span>coefficients[<span class="dv">1</span>] <span class="sc">+</span> regression1<span class="sc">$</span>coefficients[<span class="dv">2</span>]<span class="sc">*</span>SFS_data<span class="sc">$</span>income_before_tax)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#this is our estimated fitted line</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> SFS_data, <span class="fu">aes</span>(<span class="at">x =</span> income_before_tax, <span class="at">y =</span> wealth)) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">"Wealth"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Income before tax"</span>)<span class="sc">+</span><span class="fu">scale_x_continuous</span>() <span class="co">#defines our x and y</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> f <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#070069"</span>, <span class="at">data =</span> fitted_line) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#ff0000"</span>, <span class="at">data =</span> fitted_line2) <span class="co">#style preferences</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>f <span class="co">#prints graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you can see - there’s a very close relationship between <code>after_tax_income</code> and <code>wealth</code>. The red line is a regression line of wealth and after_tax_income.</p>
<p>Notice as well that we have negative values. Negative income and negative wealth is weird. We will deal with this later.</p>
</section>
</section>
<section id="part-2-simple-regressions-and-t-tests" class="level2">
<h2 class="anchored" data-anchor-id="part-2-simple-regressions-and-t-tests">Part 2: Simple Regressions and <span class="math inline">\(t\)</span>-Tests</h2>
<p>Previously, we looked at the relationship between market income and wages. However, these are both <em>quantitative</em> variables. What if we wanted to work with a <em>qualitative</em> variable like <code>gender</code>?</p>
<p>Regression models can still incorporate this kind of variable - which is good, because (as the Census makes clear) this is the most common type of variable in real-world data. How is this possible?</p>
<p>Let’s start out with the simplest kind of qualitative variable: a <strong>dummy</strong> (0 or 1) variable. Let’s use Male = <span class="math inline">\(0\)</span> and Female = <span class="math inline">\(1\)</span>. Consider the regression equation:</p>
<p><span class="math display">\[W_i = \beta_0 + \beta_1 G_i + \epsilon_i ~, \text{where}\ G_i \ \text{is Gender}
\]</span></p>
<p>Consider the conditional expectation:</p>
<p><span class="math display">\[
E[W_i|G_i = \text{Male}] = \beta_0 + \beta_1 \cdot 1 + \epsilon_i
\]</span></p>
<p><span class="math display">\[
E[W_i|G_i = \text{Female}] = \beta_0 + \beta_1 \cdot 0 + \epsilon_i
\]</span></p>
<p>By the OLS regression assumptions, we have that $E[_i|G_i] = 0 $, so:</p>
<p><span class="math display">\[
E[W_i|G_i = \text{Female}] = \beta_0 + \beta_1
\]</span></p>
<p><span class="math display">\[
E[W_i|G_i = \text{Male}] = \beta_0
\]</span></p>
<p>Combining these two expressions:</p>
<p><span class="math display">\[
\beta_1 = E[W_i|G_i = \text{Female}] - E[W_i|G_i = \text{Male}] = \beta_1-\beta_0
\]</span></p>
<p>What this tells us:</p>
<ol type="1">
<li>We can include <strong>dummy</strong> variables in regressions just like quantitative variables</li>
<li>The coefficients on the dummy variable have meaning in terms of the regression model</li>
<li>The coefficients measure the (average) difference in the dependent variable between the two levels of the dummy variable</li>
</ol>
<p>We can estimate this relationship of gender and wealth using R. As we investigate the wealth gap between male and female lead households, we might expect to see a negative sign on the coefficient - that is, if we anticipate that female lead households will have less wealth than male lead households.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>regression2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wealth <span class="sc">~</span> gender, <span class="at">data =</span> SFS_data)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What do you see here?</p>
<blockquote class="blockquote">
<p><strong>Test Your Knowledge</strong>: What is the difference in average wealth between male and female lead households?</p>
</blockquote>
<div class="cell question">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># input the answer (to 1 decimal place, don't forget to add a negative sign, if relevant)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>answer2 <span class="ot">&lt;-</span>  ???  <span class="co"># your answer here</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">test_2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number might seem familiar if you remember what we learned about a <span class="math inline">\(t\)</span>-test from earlier. Remember this result?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">=</span> <span class="fu">t.test</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="fu">filter</span>(SFS_data, gender <span class="sc">==</span> <span class="st">"Male"</span>)<span class="sc">$</span>wealth,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="fu">filter</span>(SFS_data, gender <span class="sc">==</span> <span class="st">"Female"</span>)<span class="sc">$</span>wealth,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">alternative =</span> <span class="st">"two.sided"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mu =</span> <span class="dv">0</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">conf.level =</span> <span class="fl">0.95</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>t1 </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>t1<span class="sc">$</span>estimate[<span class="dv">1</span>] <span class="sc">-</span> t1<span class="sc">$</span>estimate[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look closely at this result, and the result above. What do you see? What is the relationship here?</p>
<p>This is a very important result because a dummy variable regression is an example a two sample comparison. Why is this? Recall:</p>
<p><span class="math display">\[\beta_1 = E[W_i|G_i = \text{Female}] - E[W_i|G_i = \text{Male}]
\]</span></p>
<p>The regression coefficient of <span class="math inline">\(\beta_1\)</span> can be interpreted as a comparison of two means. This is exactly the same as what the <span class="math inline">\(t\)</span>-test is doing. Comparing two means by different groups - groups which are specified by <span class="math inline">\(G_i = \text{Male}\)</span> or <span class="math inline">\(G_i = \text{Female}\)</span>.</p>
<p>In other words, another way of thinking about a regression is as a <code>super</code> comparison of means test. However, regressions can handle analysis using qualitative (dummy) variables as a well as quantitative variables, which regular comparison of means tests cannot handle.</p>
<section id="multiple-levels" class="level3">
<h3 class="anchored" data-anchor-id="multiple-levels">Multiple Levels</h3>
<p>Okay, but what if you have a qualitative variable that takes on <em>more</em> than two levels? For example, the <code>education</code> variable includes four different education classes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(education) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">number_of_observations =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this case, the idea is that you can replace a qualitative variable by a <em>set of dummies</em>. Consider the following set of variables:</p>
<ul>
<li><code>d_1</code>: Is highest education less than high school? (Yes/No)</li>
<li><code>d_2</code>: Is highest education high school? (Yes/No)</li>
<li><code>d_3</code>: Is highest education non-university post-secondary? (Yes/No)</li>
<li><code>d_4</code>: Is highest education university? (Yes/No)</li>
</ul>
<p>These four dummy variables capture the same information as the qualitative variable <code>education</code>. In other words, if we were told the value of <code>education</code> we could discern which of these dummies were <code>Yes</code> or <code>No</code>, and vice-versa. In fact, if wetake a closer look, we’ll notice that we actually only need three of the four to figure out the value of <code>education</code>. For example, if I told you that <code>d_4</code>, <code>d_3</code>, <code>d_2</code> were all “No”, what would the value of <code>education</code> be?</p>
<p>In other words, one of the dummies is redundant in helping us understand the qualitative variable. This property is important; we usually will omit one possible dummy to include only the minimum number of variables needed to explain the qualitative variable in question. This omitted dummy is called the <strong>base level</strong>. If we forget about this and still add 4 dummy variables, we would be committing a dummy variable trap.</p>
<ul>
<li>Which one should be the base level? It doesn’t matter, from a technical perspective.</li>
</ul>
<blockquote class="blockquote">
<p><strong>Test Your Knowledge</strong>: suppose you have a qualitative variable with <span class="math inline">\(k\)</span> distinct levels. What is the minimum number of <em>possible</em> ways to represent a set of dummies if you don’t want to include any redundant variables?</p>
</blockquote>
<ul>
<li><strong>A</strong>: <span class="math inline">\(k\)</span></li>
<li><strong>B</strong>: <span class="math inline">\(k-1\)</span></li>
<li><strong>C</strong>: <span class="math inline">\(k+1\)</span></li>
<li><strong>D</strong>: <span class="math inline">\(k^2\)</span></li>
</ul>
<div class="cell question">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>answer2<span class="fl">.5</span> <span class="ot">&lt;-</span> ??? <span class="co"># type in your answer here </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">test_2.5</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In general, in R, most commands will automatically handle this process of creating dummies from qualitative variables. As you saw with the simple regression, R created them for you. You can also create dummies using a variety of commands, if necessary - but in general, if you tell R that your variables are factors, it will automatically handle the creation of dummies properly.</p>
<p>Technically, the example above which includes multiple variables is called a <strong>multiple regression</strong> model, which we haven’t covered yet.</p>
<p>Let’s explore regression some more, in the following series of exercises.</p>
</section>
</section>
<section id="part-3-weighting" class="level2">
<h2 class="anchored" data-anchor-id="part-3-weighting">Part 3: Weighting</h2>
<p>In the previous examples, we have assumed that all observations are equally important. However, this is not always the case. Sometimes, we may want to give more weight to some observations than others. This could be for a wide variety of reasons, but a common one has to do with the observations in your sample as compared to the true population (other common reasons include data reliability and the need to correct for selection bias).</p>
<p>Consider the Survey of Financial Statistics versus the true population of Canada. The SFS is a sample of the population, and it is possible that the sample is not representative of the population. In this case, we might want to weight the observations in the sample to make them more representative of the population.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(SFS_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In our case, the SFS surveyed 10,141 individuals. However, the <a href="https://www150.statcan.gc.ca/n1/pub/11-627-m/11-627-m2019061-eng.htm">population of Canada in 2019 was 37.6 million people</a>. While completing the census is a legal obligation which is typically good at capturing practically all inhabitants, the SFS is voluntary and may or may not represent the population well (e.g.&nbsp;perhaps the super wealthy or those in destitute poverty are underrepresented, or marginalized groups are less likely to respond to government surveys about something as personal as your wealth).</p>
<p>Whatever the case may be, we’ll want to adjust, “weight”, our sample to make it more representative of the population (and we’ll use the census as our benchmark). Luckily for us, StatCan is aware of this potential issue, and has included pre-made/recommended weights for us to use!</p>
<p>To see what happens when we include weights we simply add a straightforward argument <code>weight = x</code> in the <code>lm()</code>function, where <code>x</code> is the name of your weighting variable. (If for some reason your weights are contained in a different dataset than the rest of your data you could use <code>weight = other_dataset$x</code> to specify the correct weights).</p>
<p>Let’s remind ourselves of what we found in <code>regression1</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression1) <span class="co">#original non-weighted regression</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>How does this compare to a weighted regression?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>regression3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wealth <span class="sc">~</span> income_after_tax, <span class="at">data =</span> SFS_data, <span class="at">weights =</span> pweight) <span class="co">#the variable for weights in SFS_data is called pweight, short for population weight. </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><em>Think Deeper</em>: What is the difference in the coefficient on <code>income_after_tax</code> between the weighted and unweighted regressions? What does the change in the intercept imply?</p>
</blockquote>
<p>How about when we looked at the gender effect on wealth?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression2) <span class="co">#again, our original non-weighted regression</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>regression4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wealth <span class="sc">~</span> gender, <span class="at">data =</span> SFS_data, <span class="at">weights =</span> pweight)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><em>Think Deeper</em>: What is the difference in the coefficient on <code>gender</code> between the weighted and unweighted regressions? What does the change in the intercept imply? Did the unweighted regression overestimate or underestimate the gender-wealth gap?</p>
</blockquote>
<p>In general, weighting is a powerful tool that can help us correct for biases in our data. However, it is important to remember that weighting is not a panacea. It can only correct for biases that we know about and can measure. If there are biases in our data that we are unaware of or we don’t know what to benchmark against, weighting will not help us.</p>
</section>
<section id="part-4-exercises" class="level2">
<h2 class="anchored" data-anchor-id="part-4-exercises">Part 4: Exercises</h2>
<section id="activity-1" class="level3">
<h3 class="anchored" data-anchor-id="activity-1">Activity 1</h3>
<p>Last week, we briefly explored the idea of the wealth gap and explored the idea that it could be caused by some income related factors. We can now examine this issue directly using regressions. Run a regression with * before tax income * on male and female lead households.</p>
<p><em>Tested objects:</em> <code>regm</code> (the regression for males). <em>Tested objects:</em> <code>regf</code> (the regression for females).</p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quiz 1</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression for males</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>regm <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> income_before_tax, <span class="fu">filter</span>(SFS_data, ??? <span class="sc">==</span> <span class="st">"Male"</span>)) </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace "..." with the appropriate variables </span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#remember answers are case sensitive!</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Quiz 2</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression for females</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>regf <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> income_before_tax, <span class="at">data =</span> <span class="fu">filter</span>(SFS_data, ??? <span class="sc">==</span> <span class="st">"Female"</span>)) </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#remember answers are case sensitive!</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regm) <span class="co"># Allow us to view regm's coefficient estimates</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regf) <span class="co"># Same as above, but for regf</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="fu">test_3</span>() <span class="co"># Quiz1</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="fu">test_4</span>() <span class="co"># Quiz2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="short-answer-1" class="level4">
<h4 class="anchored" data-anchor-id="short-answer-1">Short Answer 1</h4>
<p><strong>Prompt:</strong> How do we interpret the coefficient estimate on <code>income</code> in each of these regressions?</p>
<p><font style="color:red">Answer in red here!</font></p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>short_answer_1 <span class="ot">&lt;-</span> <span class="co">#fill in your short answer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Answer: In this case the coefficient on before tax income is how we expect wealth to change for a given change in income. So, for each new dollar of income we expect the male lead households to acquire 5.3 dollars of wealth, and female lead households to acquire 9.4 dollars of wealth. Also notice the intercepts are different. There may be some left-out factors or the relation is non-linear, which would mean <span class="math inline">\(\beta_1\)</span> is not really the instantaneous rate of change.</p>
</section>
</section>
<section id="activity-2" class="level3">
<h3 class="anchored" data-anchor-id="activity-2">Activity 2</h3>
<p>We might think that income inequality between females and males might depend on the educational gaps between these two groups. In this activity, we will explore how the income gap varies by education. First, let’s see the factor levels of the <code>education</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(SFS_data<span class="sc">$</span>education) <span class="co"># Run this</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As we can see, there are a few education groups in this dataframe. Let’s estimate the income gap (with no controls) for each of the four groups separately:</p>
<ul>
<li>Less than high school</li>
<li>High school</li>
<li>Non-university post-secondary</li>
<li>University</li>
</ul>
<p><em>Tested objects:</em> <code>rege2</code> (High School), <code>rege4</code> (University)</p>
<p>Notice we don’t need to do 4 regressions we could just do three.</p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reg1 is a regression performed on people, with a less than high school education</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>reg1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> ???, <span class="at">data =</span> <span class="fu">filter</span>(SFS_data, education <span class="sc">==</span> <span class="st">"Less than high school"</span>)) <span class="co">#what should replace the ...</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#reg2 is the same as rege1,but we are looking at people with a high school education</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>reg2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> ???, <span class="at">data =</span> <span class="fu">filter</span>(SFS_data, education <span class="sc">==</span> <span class="st">"High school"</span>)) <span class="co">#fill in the blanks</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>reg3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> ???, <span class="at">data =</span> <span class="fu">filter</span>(SFS_data, education <span class="sc">==</span> <span class="st">"Non-university post-secondary"</span>)) <span class="co">#remember answers are case sensitive!</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>reg4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> ???, <span class="at">data =</span> <span class="fu">filter</span>(SFS_data,education <span class="sc">==</span> <span class="st">"University"</span>))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># store the summaries (but don't show them!  too many!)</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>sum20 <span class="ot">&lt;-</span> <span class="fu">summary</span>(reg1)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>sum30 <span class="ot">&lt;-</span> <span class="fu">summary</span>(reg2)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>sum40 <span class="ot">&lt;-</span> <span class="fu">summary</span>(reg3)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>sum50 <span class="ot">&lt;-</span> <span class="fu">summary</span>(reg4)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="fu">test_5</span>()</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="fu">test_6</span>()</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="fu">test_7</span>()</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="fu">test_8</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code below will tabulate a brief summary of each regression:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># just run me.  You don't need to edit this</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>Educ_Group <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Less than high school"</span>, <span class="st">"High School"</span>, <span class="st">"Non-university post-secondary"</span>, <span class="st">"University"</span>) <span class="co">#defines column 1</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>Income_Gap <span class="ot">&lt;-</span> <span class="fu">c</span>(reg1<span class="sc">$</span>coefficients[<span class="dv">2</span>], reg2<span class="sc">$</span>coefficients[<span class="dv">2</span>], reg3<span class="sc">$</span>coefficients[<span class="dv">2</span>], reg4<span class="sc">$</span>coefficients[<span class="dv">2</span>]) <span class="co">#defines column 2</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>Std._Error <span class="ot">&lt;-</span> <span class="fu">c</span>(sum20<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">2</span>], sum30<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">2</span>], sum40<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">2</span>], sum50<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">2</span>]) <span class="co">#defines column 3</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>t_Value <span class="ot">&lt;-</span> <span class="fu">c</span>(sum20<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">3</span>], sum30<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">3</span>], sum40<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">3</span>], sum50<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">3</span>]) <span class="co">#defines column 4</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>p_Value <span class="ot">&lt;-</span> <span class="fu">c</span>(sum20<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">4</span>], sum30<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">4</span>], sum40<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">4</span>], sum50<span class="sc">$</span>coefficients[<span class="dv">2</span>,<span class="dv">4</span>]) <span class="co">#defines column 5</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(Educ_Group, Income_Gap, Std._Error, t_Value, p_Value) <span class="co">#it's like a table but a tibble</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="short-answer-2" class="level4">
<h4 class="anchored" data-anchor-id="short-answer-2">Short Answer 2</h4>
<p><strong>Prompt</strong>: What happens to the income gap as we move across education groups? What might explain these changes? (hint: think back to module 1!)</p>
<p><font style="color:red">Answer in red here!</font></p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>short_answer_2 <span class="ot">&lt;-</span> <span class="co">#fill in your short answer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Answer: The Income Gap appears to increase, however this is simply because income increases, in percent terms the income gap decreases (from module 1)</p>
</section>
</section>
<section id="activity-3" class="level3">
<h3 class="anchored" data-anchor-id="activity-3">Activity 3</h3>
<p>As we observed in last week’s worksheet, the income gap could differ by education level. Since there are many education categories, however, we may not want to examine this by running a regression for each education level separately.</p>
<p>Instead, we could run a single regression and add education level as a second regressor, <span class="math inline">\(E_i\)</span>:</p>
<p><span class="math display">\[I_i = \beta_0 + \beta_1 G_i + \beta_2 E_i + \epsilon_i
\]</span></p>
<p>This is actually a <strong>multiple regression</strong>, which we will learn about later - but from the point of this lesson, the idea is that it is “run” in R essentially in the same way as a simple regression. Estimate the regression model above without <span class="math inline">\(E_i\)</span>, then re-estimate the model with <span class="math inline">\(E_i\)</span> added. <strong>USE INCOME BEFORE TAX</strong>.</p>
<p><em>Tested objects:</em> <code>reg2A</code> (regression without controls), <code>reg2B</code> (regression with controls).</p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple regression (just gender)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>reg2A <span class="ot">&lt;-</span> <span class="fu">lm</span>(income_before_tax <span class="sc">~</span> gender, <span class="at">data =</span> SFS_data) <span class="co"># this one works already</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression with controls</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>reg2B <span class="ot">&lt;-</span>  <span class="fu">lm</span>(income_before_tax <span class="sc">~</span> ??? <span class="sc">+</span> education, <span class="at">data =</span> SFS_data) <span class="co"># replace the ...</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reg2A)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(reg2B)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#this will look ugly; try to look carefully at the output</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="fu">test_9</span>()</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">test_10</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="short-answer-3" class="level4">
<h4 class="anchored" data-anchor-id="short-answer-3">Short Answer 3</h4>
<p>Prompt: Compare the estimated income gap with and without <span class="math inline">\(E_i\)</span> in the regression. What happens to the gap when we add <span class="math inline">\(E_i\)</span>?</p>
<p><font style="color:red">Answer in red here!</font></p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>short_answer_3 <span class="ot">&lt;-</span> <span class="co">#fill in your short answer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Answer: The gender-income gap has increased; notice the stand error’s have increased. This means it’s harder to have certainty what the income gap is once we control for education.</p>
</section>
</section>
<section id="theoretical-activity-1" class="level3">
<h3 class="anchored" data-anchor-id="theoretical-activity-1">Theoretical Activity 1</h3>
<p>When we deal with large quantitative variables, we often take the natural log of it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>W <span class="ot">=</span> <span class="fu">log</span>(SFS_data<span class="sc">$</span>wealth[SFS_data<span class="sc">$</span>wealth<span class="sc">&gt;</span><span class="dv">0</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You may recall that the derivative of the log of a variable is approximately equal to percentage change in the variables:</p>
<p><span class="math display">\[\frac{dln(x)}{dx} \approx \frac{\Delta x}{x}
\]</span></p>
<p>Thus, when we find the marginal effect of some continuous regressor <span class="math inline">\(X_i\)</span> (say, <code>income</code>):</p>
<p><span class="math display">\[ln(W_i) = \beta_0 + \beta_1 I_i + \epsilon_i \implies \frac{\Delta W_i}{W_i} \approx \beta_1 \Delta I_{i}
\]</span></p>
<p>This allows us to interpret the changes in a continuous variable as associated with a percentage change in wealth; for instance, if we estimate a coefficient of <span class="math inline">\(0.02\)</span> on <code>income_before_tax</code>, we say that when a family’s income before tax increases by 1 CAD, the corresponding wealth increases by 2 percent on average.</p>
<p>Notice we are now talking about percent changes, rather than units.</p>
<p>Let’s generate two variables that take the natural log of the wealth <em>and</em> market income from the <code>SFS_data</code> dataframe (hint: use a technique that we introduced last week). Then, estimate the effect of logarithmic market income on logarithmic wealth.</p>
<p><em>Tested Objects:</em> <code>lnreg</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Generate log wage variable</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>SFS_data <span class="ot">&lt;-</span> SFS_data <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mutate</span>(<span class="at">lnincome =</span> <span class="fu">log</span>(SFS_data<span class="sc">$</span>income_before_tax)) <span class="sc">%&gt;%</span> <span class="co"># what goes here?</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mutate</span>(<span class="at">lnwealth =</span> <span class="fu">log</span>(SFS_data<span class="sc">$</span>wealth)) <span class="co"># what goes here?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice warning message “NaNs produced”. NaN means “Not a Number”. This happens because we had negative income and negative wealth. No matter how low our incomes are, the more we work, wealth and income should increase.</p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fix NANs</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>SFS_data_logged <span class="ot">&lt;-</span> SFS_data <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(income_before_tax<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co">#removes negative values</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(wealth<span class="sc">&gt;</span><span class="dv">0</span>)  <span class="co">#removes negative values</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Log Regression </span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>lnreg <span class="ot">&lt;-</span> <span class="fu">lm</span>(lnwealth <span class="sc">~</span> ???, <span class="at">data =</span> SFS_data_logged) <span class="co">#the new and improved regression</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lnreg)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="fu">test_11</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="short-answer-4" class="level4">
<h4 class="anchored" data-anchor-id="short-answer-4">Short Answer 4</h4>
<p>Prompt: How do we interpret each of these estimates? (Hint: what does a 1-unit change in the explanatory variable mean here?)</p>
<p><font style="color:red"> Answer here in red</font></p>
<div class="cell question">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>short_answer_4 <span class="ot">&lt;-</span> <span class="co">#fill in your short answer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Answer: Intercept: The intercept estimate represents the expected value of the response variable (lnwealth) when the predictor variable (lnincome) is zero. In this case, the estimated intercept is 6.17242. Since the logarithm of wealth (lnwealth) is being used, it means that when the logarithm of income (lnincome) is zero, the expected value of the logarithm of wealth is 6.17242.</p>
<p>lnincome: The coefficient estimate for lnincome is 0.61532. It represents the estimated change in the response variable (lnwealth) for a one-unit increase in the predictor variable (lnincome). Therefore, for every one-unit increase in the logarithm of income, the estimated change in the logarithm of wealth is 0.61532.</p>
</section>
</section>
<section id="optional-bonus-activity-4" class="level3">
<h3 class="anchored" data-anchor-id="optional-bonus-activity-4">Optional: Bonus Activity 4</h3>
<p>You have learned about a linear regression model of income; however, income often follows a Pareto distribution. For now, using a linear approximation to find the wage gap is fine. We may want to know stuff about the underlying distribution of income in male and female lead households, however. Here’s the PDF of pareto distribution:</p>
<p><span class="math display">\[f(x) = {\displaystyle {\frac {\alpha x_{\mathrm {m} }^{\alpha }}{x^{\alpha +1}}}}
\]</span></p>
<p>Ok, now with regression remember we said that we estimate the parameter given the data. To do this we said you could use Calculus or methods other than OLS. Here the probability of the data can be approximated by assuming independence between each <span class="math inline">\(x_i\)</span>. If we do this, the probability of the data is given by:</p>
<p><span class="math display">\[\Pi_{i=1}^n f(x)
\]</span></p>
<p>Now we can just make a function in r and optimize over it which performs essentially the same operation as a linear regression.</p>
<div class="cell" data-scrolled="true">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">=</span><span class="fu">filter</span>(SFS_data,gender<span class="sc">==</span><span class="st">'Female'</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">filter</span>(x, <span class="fu">is.numeric</span>(income_before_tax))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x<span class="sc">$</span>income_before_tax</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>calc <span class="ot">&lt;-</span> <span class="cf">function</span> (x){</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    q<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> x){</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>      a<span class="ot">=</span> <span class="fu">log</span>(i[<span class="dv">1</span>]) }</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.numeric</span>(a)<span class="sc">==</span><span class="cn">TRUE</span>){</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>            q<span class="ot">=</span>q<span class="sc">+</span>a }</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span> (q)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>ell <span class="ot">&lt;-</span> <span class="cf">function</span>(a,q,xm,n) { <span class="co"># we use the log function of the pareto distribution instead</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    d<span class="ot">=</span>(n<span class="sc">*</span><span class="fu">log</span>(a))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    b<span class="ot">=</span>(<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span>(a<span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span>q</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    c<span class="ot">=</span>a<span class="sc">*</span><span class="fu">log</span>(xm)<span class="sc">*</span>n </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span> (d<span class="sc">+</span>b<span class="sc">+</span>c)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="fu">optimize</span>(ell,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">50</span>),<span class="at">maximum=</span><span class="cn">TRUE</span>,<span class="at">q=</span><span class="fl">43074.1853103325</span>,<span class="at">xm=</span><span class="dv">40000</span>,<span class="at">n=</span><span class="fu">length</span>(x))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>a_women<span class="ot">=</span>a<span class="sc">$</span>maximum </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>y<span class="ot">=</span><span class="fu">filter</span>(SFS_data,gender<span class="sc">==</span><span class="st">'Male'</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">filter</span>(y, <span class="fu">is.numeric</span>(income_before_tax))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y<span class="sc">$</span>income_before_tax</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>a_men <span class="ot">=</span> <span class="fu">optimize</span>(ell,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1000</span>),<span class="at">maximum=</span><span class="cn">TRUE</span>,<span class="at">q=</span><span class="fu">calc</span>(y),<span class="at">xm=</span><span class="dv">65000</span>,<span class="at">n=</span><span class="fu">length</span>(y))</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>a_men <span class="ot">=</span> a_men<span class="sc">$</span>maximum</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>a_men</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The theoretical mean of the Pareto distribution is,</p>
<p><span class="math display">\[ \frac{\alpha x_m}{\alpha -1}
\]</span></p>
<p>Can you calculate the expected income gap with the Pareto distribution assumption?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>xmw<span class="ot">=</span><span class="dv">40000</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>xmm<span class="ot">=</span><span class="dv">65000</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>income_gap <span class="ot">=</span>((a_women<span class="sc">*</span> xmw )<span class="sc">/</span> (a_women<span class="dv">-1</span>)) <span class="sc">-</span> ((a_men<span class="sc">*</span> xmm )<span class="sc">/</span> (a_men<span class="dv">-1</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>income_gap <span class="co">#note we set xm ourselves (I did this by playing around with xm, and doing a bit of research) see if you can get a better xm.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../../../docs/2_Beginner/beginner_sampling_distributions/beginner_sampling_distributions.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Sampling Distributions</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a>.  <a rel="license" href="https://comet.arts.ubc.ca/pages/copyright.html">See details.</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 The COMET Project and the UBC Vancouver School of Economics are located on the traditional, ancestral and unceded territory of the xʷməθkʷəy̓əm (Musqueam) and Sḵwx̱wú7mesh (Squamish) peoples.
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>